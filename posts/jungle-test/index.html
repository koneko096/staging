<!DOCTYPE html>















<html lang="en-us">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>Testing Entire Jungle - Postmortem</title>

  
  
  <meta name="description" content="You wanted a banana but what you got was a gorilla holding the banana and the entire jungle
 In order to create a modular classes, a lot people compose several layers of abstractions." />
  <meta name="author" content="" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://koneko096.github.io/staging/app.min.css" />

  
  <link rel="preload stylesheet" as="style" href="https://koneko096.github.io/staging/an-old-hope.min.css" />
  <script
    defer
    src="https://koneko096.github.io/staging/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  <link rel="preload" as="image" href="https://koneko096.github.io/staging/theme.png" />

  
  <link rel="preload" as="image" href="https://koneko096.github.io/staging/twitter.svg" />
  
  <link rel="preload" as="image" href="https://koneko096.github.io/staging/github.svg" />
  

  
  <link rel="icon" href="https://koneko096.github.io/staging/favicon.ico" />
  <link rel="apple-touch-icon" href="https://koneko096.github.io/staging/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.81.0" />

  
  

  
  
  
  
  
  
  
  <meta property="og:title" content="Testing Entire Jungle" />
<meta property="og:description" content="You wanted a banana but what you got was a gorilla holding the banana and the entire jungle
 In order to create a modular classes, a lot people compose several layers of abstractions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://koneko096.github.io/staging/posts/jungle-test/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-10T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2019-01-10T00:00:00&#43;00:00" />


  
  <meta itemprop="name" content="Testing Entire Jungle">
<meta itemprop="description" content="You wanted a banana but what you got was a gorilla holding the banana and the entire jungle
 In order to create a modular classes, a lot people compose several layers of abstractions."><meta itemprop="datePublished" content="2019-01-10T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-01-10T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="228">
<meta itemprop="keywords" content="testing,,clean architecture,oop," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Testing Entire Jungle"/>
<meta name="twitter:description" content="You wanted a banana but what you got was a gorilla holding the banana and the entire jungle
 In order to create a modular classes, a lot people compose several layers of abstractions."/>

  
  
</head>


  <body class="not-ready" data-menu="true">
    <header class="header">
  
  <p class="logo">
    <a class="site-name" href="https://koneko096.github.io/staging">Postmortem</a><a class="btn-dark"></a>
  </p>
  

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  
  
  <nav class="menu">
    
    <a class="" href="https://koneko096.github.io/staging/posts/faq/">FAQ</a>
    
  </nav>
  

  
  <nav class="social">
    
    <a
      class="twitter"
      style="--url: url(./twitter.svg)"
      href="https://twitter.com/koneko096"
      target="_blank"
    ></a>
    
    <a
      class="github"
      style="--url: url(./github.svg)"
      href="https://github.com/koneko096"
      target="_blank"
    ></a>
    
  </nav>
  
</header>


    <main class="main">

<article class="post-single">
  <header class="post-title">
    <aside>
      <time>January 10, 2019</time>
      
    </aside>
    <h1>Testing Entire Jungle</h1>
  </header>
  <section class="post-content"><blockquote>
<p>You wanted a banana but what you got was a gorilla holding the banana and the entire jungle</p>
</blockquote>
<p>In order to create a modular classes, a lot people compose several layers of abstractions. One of the most populous usage is <a href="http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">onion architecture</a> (also called hexagonal architecture). One of the promise is to make classes more testable. I&rsquo;d say not quiet the case.</p>
<p>Consider following example, we want to test internal method <code>ChangePaymentStatus</code> inside <code>PaymentService</code> class. This method cannot be called publicly. So, in order to do that, we need to call <code>VerifyAndUpdatePaymentStatus</code>, and then mock both <code>PaymentProviderService</code> and <code>OrderService</code> for verification. For each services, we have to mock several another methods again. It turns out we called the entire jungle whereas we just wanna taste a banana.</p>
<p>This problem arise when someone do clean architecture without considering proper concern separation, in this case <a href="https://medium.com/@severinperez/avoiding-interface-pollution-with-the-interface-segregation-principle-5d3859c21013">interface segregation principle</a>. Each service, should be designed to extend several API contract. And then, we would not want to test the service itself, but the contracts. Each contract will focus only part of specific cases a service should have.</p>
<p>In the case above, <code>PaymentService</code> should extend <code>UpdatePaymentStatus</code> and <code>VerifyPaymentStatus</code>, then introduce verification as different mocked object. This way, we don&rsquo;t even need  <code>PaymentProviderService</code> and <code>OrderService</code> anymore. As we expect to get banana we just need banana tree itself. Not the gorilla or the jungle.</p>
</section>

  
  
  <footer class="post-tags">
     
    <a href="https://koneko096.github.io/staging/tags/testing">testing</a>
     
    <a href="https://koneko096.github.io/staging/tags/"></a>
     
    <a href="https://koneko096.github.io/staging/tags/clean-architecture">clean architecture</a>
     
    <a href="https://koneko096.github.io/staging/tags/oop">oop</a>
    
  </footer>
  

  
  
  
  <nav class="post-nav">
    
    <a class="prev" href="https://koneko096.github.io/staging/posts/test/"><span>←</span><span>Should We Write Tests?</span></a>
     
    <a class="next" href="https://koneko096.github.io/staging/posts/safe-vector/"><span>Work Safely with C&#43;&#43; Vector</span><span>→</span></a>
    
  </nav>
  

  
  
</article>

</main>

    <footer class="footer">
  <p>&copy; 2021 <a href="https://koneko096.github.io/staging">Postmortem</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</p>
  <p>
    <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper 5.0</a>
  </p>
</footer>

  </body>
</html>
